{"ast":null,"code":"import _classCallCheck from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/samman/Documents/laravel-project/react-git/src/components/booksComponents/bookComments.js\";\nimport React, { Component } from 'react';\nimport '../../Styles/bookprofile.css';\nimport axios from \"axios\";\n\nvar Bookcommnets =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Bookcommnets, _Component);\n\n  function Bookcommnets(props) {\n    var _this;\n\n    _classCallCheck(this, Bookcommnets);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Bookcommnets).call(this, props));\n\n    _this.handelRemoveComment = function (id, userId) {\n      console.log(id);\n      axios.delete('http://127.0.0.1:8001/api/books/' + id + userId).then(function (res) {\n        var comments = _this.state.comments.filter(function (comment) {\n          return comment.id != id;\n        });\n\n        _this.setState({\n          comments: comments\n        });\n      }).catch(function (err) {\n        alert(\"invalid email or password\");\n      });\n    };\n\n    _this.state = {\n      comments: [],\n      user: [],\n      bookId: _this.props.bookData\n    };\n    return _this;\n  }\n\n  _createClass(Bookcommnets, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.getItem(\"TOKEN\");\n      var user = JSON.parse(localStorage.getItem(\"USER\")); //current user\n\n      this.setState({\n        user: user\n      });\n\n      if (!token) {\n        window.location = \"http://localhost:3000/\";\n      }\n\n      axios.get('http://127.0.0.1:8001/api/books/' + this.state.bookId).then(function (res) {\n        if (res.data) {\n          _this2.setState({\n            comments: res.data.data\n          });\n        } else {\n          alert(\"invalid email or password\");\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \" mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, this.state.comments.map(function (comment) {\n        return React.createElement(\"div\", {\n          className: \"offset-1 row mt-2\",\n          key: comment.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"btn-lg btn-dark col-9 border-dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, comment.body), React.createElement(\"div\", {\n          className: \"col-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, comment.id == _this3.state.user.is ? React.createElement(\"button\", {\n          className: \" col-12 btn btn-lg btn-primary\",\n          onClick: function onClick() {\n            return _this3.handelRemoveComment(comment.id, _this3.state.user.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, \"delete\") : React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        })));\n      }), \";\");\n    }\n  }]);\n\n  return Bookcommnets;\n}(Component);\n\nexport default Bookcommnets;","map":{"version":3,"sources":["/home/samman/Documents/laravel-project/react-git/src/components/booksComponents/bookComments.js"],"names":["React","Component","axios","Bookcommnets","props","handelRemoveComment","id","userId","console","log","delete","then","res","comments","state","filter","comment","setState","catch","err","alert","user","bookId","bookData","token","localStorage","getItem","JSON","parse","window","location","get","data","map","body","is"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../../Styles/bookprofile.css';\nimport axios from \"axios\";\n\nclass Bookcommnets extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            comments: [],\n            user: [],\n            bookId: this.props.bookData\n        };\n    }\n\n    componentDidMount() {\n        let token = localStorage.getItem(\"TOKEN\");\n        let user = JSON.parse(localStorage.getItem(\"USER\"));\n        //current user\n        this.setState({\n            user,\n        });\n\n        if (!token) {\n            window.location = \"http://localhost:3000/\";\n        }\n        axios.get('http://127.0.0.1:8001/api/books/' + this.state.bookId)\n            .then(res => {\n                if (res.data) {\n                    this.setState({\n                        comments: res.data.data,\n                    });\n                } else {\n                    alert(\"invalid email or password\");\n                }\n            });\n    }\n\n\n    handelRemoveComment = (id, userId) => {\n        console.log(id);\n        axios.delete('http://127.0.0.1:8001/api/books/' + id + userId)\n            .then(res => {\n                const comments = this.state.comments.filter(comment => {\n                    return comment.id != id\n                });\n                this.setState({\n                    comments,\n                });\n            }).catch(err => {\n            alert(\"invalid email or password\");\n        });\n    };\n\n    render() {\n        return (\n            <div className=' mt-5'>\n                {this.state.comments.map((comment) =>\n                    <div className=\"offset-1 row mt-2\" key={comment.id}>\n                        <div className='btn-lg btn-dark col-9 border-dark'>\n                            {comment.body}\n                        </div>\n                        <div className=\"col-2\">\n                            {comment.id == this.state.user.is ?\n                                <button className=\" col-12 btn btn-lg btn-primary\"\n                                        onClick={() => this.handelRemoveComment(comment.id, this.state.user.id)}\n                                >\n                                    delete\n                                </button>\n                                :\n                                <span></span>\n                            }\n                        </div>\n                    </div>\n                )};\n            </div>\n        );\n    }\n}\n\nexport default Bookcommnets;\n"]},"metadata":{},"sourceType":"module"}