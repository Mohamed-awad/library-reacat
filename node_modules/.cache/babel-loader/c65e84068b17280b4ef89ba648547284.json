{"ast":null,"code":"import _classCallCheck from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/samman/Documents/laravel-project/react-git/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/samman/Documents/laravel-project/react-git/src/components/userComponents/UsrLogin.js\";\nimport React from 'react';\nimport { Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport \"../../App.css\";\nimport axios from \"axios\";\n\nvar UrsLogin =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UrsLogin, _React$Component);\n\n  function UrsLogin(props) {\n    var _this;\n\n    _classCallCheck(this, UrsLogin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UrsLogin).call(this, props));\n\n    _this.handleUpdateEmail = function (event) {\n      _this.setState({\n        email: event.target.value\n      });\n    };\n\n    _this.handleUpdatePassword = function (event) {\n      _this.setState({\n        password: event.target.value\n      });\n    };\n\n    _this.state = {\n      email: '',\n      password: ''\n    };\n    _this.hundleLogin = _this.hundleLogin.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(UrsLogin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token = localStorage.getItem(\"TOKEN\");\n\n      if (token) {\n        window.location = \"http://localhost:3000/books\";\n      }\n    }\n  }, {\n    key: \"hundleLogin\",\n    value: function hundleLogin() {\n      var isEmail = true; // let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      //\n      // if (re.test(String(this.state.email).toLowerCase())) {\n      //     isEmail = true;\n      // }\n\n      var NewUser = {\n        'loginKeyword': this.state.email,\n        'password': this.state.password,\n        'isEmail': \"true\"\n      };\n      axios.post('http://127.0.0.1:8001/api/login/', NewUser).then(function (res) {\n        if (res.data.token) {\n          console.log(res.data.user);\n          localStorage.setItem(\"TOKEN\", res.data.token);\n          localStorage.setItem(\"USER\", JSON.stringify(res.data.user)); //     if(res.data.user.isadmin){\n          //         window.location = \"http://localhost:3000/admin\";\n          //     }else{\n\n          if (res.data.user.isActive) {\n            window.location = \"http://localhost:3000/books\";\n          } else {\n            alert(\"sorry you are inactive\");\n          } //     }\n\n        } else {\n          alert(\"invalid email or password\");\n          window.location = \"http://localhost:3000/\";\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container-fluid \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \" UsrLogin loginDivSize\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        className: \" UsrLogin mb-2 mr-sm-2 mb-sm-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"loginInput\",\n        type: \"name\",\n        name: \"name\",\n        placeholder: \"User name\",\n        value: this.state.email,\n        onChange: this.handleUpdateEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"UsrLogin loginDivSize\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        className: \"UsrLogin  mb-2 mr-sm-2 mb-sm-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        onChange: this.handleUpdatePassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \" UsrLogin loginDivSize\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"btnMrgn\",\n        onClick: this.hundleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Login\"))))));\n    }\n  }]);\n\n  return UrsLogin;\n}(React.Component);\n\nexport default UrsLogin;","map":{"version":3,"sources":["/home/samman/Documents/laravel-project/react-git/src/components/userComponents/UsrLogin.js"],"names":["React","Button","Form","FormGroup","Label","Input","axios","UrsLogin","props","handleUpdateEmail","event","setState","email","target","value","handleUpdatePassword","password","state","hundleLogin","bind","token","localStorage","getItem","window","location","isEmail","NewUser","post","then","res","data","console","log","user","setItem","JSON","stringify","isActive","alert","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Button, Form, FormGroup, Label, Input} from 'reactstrap';\n\nimport \"../../App.css\"\nimport axios from \"axios\";\n\nclass UrsLogin extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: '',\n            password: '',\n        };\n        this.hundleLogin = this.hundleLogin.bind(this);\n    }\n\n    componentDidMount() {\n\n        let token = localStorage.getItem(\"TOKEN\");\n        if (token) {\n            window.location = \"http://localhost:3000/books\";\n        }\n    }\n\n    handleUpdateEmail = (event) => {\n        this.setState({\n            email: event.target.value\n        });\n    };\n\n    handleUpdatePassword = (event) => {\n        this.setState({\n            password: event.target.value\n        });\n    };\n\n    hundleLogin() {\n        let isEmail = true;\n        // let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        //\n        // if (re.test(String(this.state.email).toLowerCase())) {\n        //     isEmail = true;\n        // }\n        const NewUser = {\n            'loginKeyword': this.state.email,\n            'password': this.state.password,\n            'isEmail': \"true\",\n        };\n        axios.post('http://127.0.0.1:8001/api/login/', NewUser)\n            .then(res => {\n                if (res.data.token) {\n                    console.log(res.data.user);\n                    localStorage.setItem(\"TOKEN\", res.data.token);\n                    localStorage.setItem(\"USER\", JSON.stringify(res.data.user));\n                    //     if(res.data.user.isadmin){\n                    //         window.location = \"http://localhost:3000/admin\";\n                    //     }else{\n                    if (res.data.user.isActive) {\n                        window.location = \"http://localhost:3000/books\";\n                    } else {\n                        alert(\"sorry you are inactive\")\n                    }\n                    //     }\n                } else {\n                    alert(\"invalid email or password\");\n                    window.location = \"http://localhost:3000/\";\n                }\n            });\n    }\n\n    render() {\n        return (\n            <div className='container-fluid '>\n                <div className='row '>\n                    <div className='col-lg-12 '>\n                        <div className=\"logo\">\n\n                            <div className=\" UsrLogin loginDivSize\">\n                                <FormGroup className=\" UsrLogin mb-2 mr-sm-2 mb-sm-0\">\n                                    <Input className=\"loginInput\"\n                                           type=\"name\" name=\"name\"\n                                           placeholder=\"User name\"\n                                           value={this.state.email}\n                                           onChange={this.handleUpdateEmail}/>\n                                </FormGroup>\n                            </div>\n\n                            <div className=\"UsrLogin loginDivSize\">\n                                <FormGroup className=\"UsrLogin  mb-2 mr-sm-2 mb-sm-0\">\n                                    <Input type=\"password\" name=\"password\"\n                                           placeholder=\"Password\"\n                                           value={this.state.password}\n                                           onChange={this.handleUpdatePassword}/>\n                                </FormGroup>\n                            </div>\n\n                            <div className=\" UsrLogin loginDivSize\">\n                                <Button className='btnMrgn'\n                                        onClick={this.hundleLogin}>\n                                    Login\n                                </Button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default UrsLogin;\n"]},"metadata":{},"sourceType":"module"}